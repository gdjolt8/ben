<html>
  <head>
    <title>Accounts</title>
  </head>
  <body>
    <h1>Moderator Stuff</h1>
    <form id="formreg" method="post">
      <fieldset><legend>Ban User</legend>
    <dl>
      <dt><label for="username">Username:</label></dt>
      <dd><input name="username" type="text" id="username" maxlength="30" value="" size="30"</dd>
    </dl>
    <dl>
        <dt><label for="message">Message:</label></dt>
        <dd><input name="message" type="text" id="message" maxlength="60" value="" size="30"</dd>
      </dl>
    <dl>
      <button type="submit" id="button1" name="register" value="register" style="height:50px; width:100px; font-size:1rem;">Ban</button>
    </dl>
    <dl>
      <p id="para"></p>
    </dl>
    </form>
    <script> 
        const form = document.getElementById('formreg')
        form.addEventListener('submit', modbanUser)

        async function modbanUser(event) {
           event.preventDefault()
           const username = document.getElementById('username').value
           const message = document.getElementById('message').value

           const result = await fetch('/api/messages', {
             method: 'POST',
             headers: {
               'Content-Type': 'application/json'
             },
             body: JSON.stringify({
               username,
               message
             })
           }).then((res) => res.json())

           if (result.status === 'ok') {
              // everythign went fine
              alert('Success')
          } else {
              alert(result.error)
          }

           
        }
      </script>
  </body>
</html>